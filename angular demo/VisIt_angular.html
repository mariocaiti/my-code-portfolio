<!DOCTYPE html>
<html lang="en" ng-app='Visit_App' ng-controller="mainController">
<head>

<!-- Designed by Mario Caiti	-->

<title>Visualize It! (for angular JS)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">		<!-- for bootstrap scaling-->

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js" type="text/javascript">
</script>																		<!-- declare angular	-->
<script src="maincontroller.js" type="text/javascript"></script>				<!-- root controller	-->
<script src="plan.js" type="text/javascript"></script>							<!-- and the plan class file	-->
<link href="bootstrap.min.css" rel="stylesheet">								<!-- declare bootstrap in bootstrap/css/ when live-->
<link href="visIt_angular.css" rel="stylesheet">								<!-- my custom CSS, rewrite in Sass or SCSS? -->
</head>
<body>
<script src="bootstrap/js/bootstrap.min.js"></script>											<!-- declare bootstrap JS?? -->
<header id="myHeader" class="row, col-lg-12 col-md-12 col-sm-12 col-xs-12">
	<div class="row, col-lg-2 col-md-2 col-sm-2 col-xs-4">
	<a href="http://www.mariocaiti.com">
	<img src="images/WebPelican.jpg" height="100" width="70" />
	</a>
	</div>
	<div class="row, col-lg-10 col-md-10 col-sm-10 col-xs-8">
	<center>{{intro}}<br>
	<h2>
		<span>OK, let's get started!</span></center>
	</h2>
	</div>
</header>
<div id='calc' class='calc' ng-controller='mainController'>
	<div ng-controller='mainController'>
		<div id="enterSalary" class="col-lg-2 col-md-2 col-sm-12">
			<label>What do you make weekly?</label>
			<input type='number' 
				ng-model='enterSalary' 
				ng-model-options="{updateOn: 'blur'}" />
			<button ng-show="enterSalary>0" ng-click="write_SalAcknowlegemt(enterSalary); showExpenses=true">&#x25BA;</button>
		</div>
		<div id="enterExpenses" class="col-lg-6 col-md-6 col-sm-12, enterExpenses" ng-show="showExpenses">
			<span ng-bind="myPlan.salary | currency"></span><span ng-bind="acknowledgement"></span>
			<br>Now we need a breakdown of what you spend on a <em>weekly</em> basis. Just divide your monthly bill by 4.<br>
		
			<div ng-repeat="t in myPlan.expenses">
			<ng-form name="updateExpense">
				<label>{{t.label}}</label>
					<input type='number' step="0.01" min="0" 
						ng-model="t.value"
						ng-model-options="{updateOn: 'blur'}" 
						ng-change="myPlan.setExpenseAmt(t, t.value); myPlan.makeBudget()"/>
					<span ng-bind="t.value | currency"></span><br>
				</ng-form>
			</div>
			-----------------------------------------<br>
			Weekly expenses: <span ng-bind="myPlan.setWeeklyExpenses() | currency"></span><br>
			<button ng-show="myPlan.setWeeklyExpenses() > 0" ng-click="showGoals=true">&#x25BA;</button><br>
		</div>
		<div id="enterGoals" class="col-lg-4 col-md-4 col-sm-12, enterGoals" ng-show="showGoals">
			Then we are starting with a weekly budget of
			<span ng-bind="myPlan.makeBudget() | currency"></span>
			to work with.
			<br>
			What are you saving and budgeting for? (Please enter a <b><em>weekly</em></b> estimate, clicking the button to move on ;))
			<br>
			<div ng-repeat="g in myPlan.goals">	
				<ng-form name="enter{{g.name}}Budget" class="enter{{g.name}}Budget">
					<submit ng-click="myPlan.setGoal(g.value, g.action); showGoalGrid">
						<label ng-bind="g.label"></label>:
					</submit>
					<input type='number' step="0.01" min="0" 
						ng-model='g.value'
						ng-model-options="{updateOn: 'blur'}"/>
					<!--Test: goal[g].action is {{g}}-->
				</ng-form>
			</div>
			What else? (we are working on this)
			
		</div>
		
	<!-- dynamic labels (graph from scratch!) here!!! Has to adjust to weekly budgeting -->
		<div id="goalsChart" 
			class="row, col-lg-12 col-md-12 col-sm-12 col-xs-12, goalsChart" 
			style="max-height:{{myPlan.allGoalsBudget| number:0}}px;">
			<div ng-repeat="r in myPlan.goals">
				<div id="{{r.chartName}}" 
					class="col-lg-1 col-md-1 col-sm-1 col-xs-12, {{r.chartName}}" 
					ng-style="{'max-height' :(myPlan.goals[r].value / 25) + 'px'}"
					ng-show="showGoalGrid">
					<span ng-show="myPlan.goals[r].value >= 0" 
							ng-bind="myPlan.goals[r].value | currency" 
							ng-style="{'font-size' :(myPlan.goals[r].value / 50) + 'px'}"><!-- everything is weekly now, fix chart accordingly -->
					</span> - 
				</div>
				<div class="visible-xs">
				<br>
			</div>
			<div class="col-lg-1 col-md-1 col-sm-1 col-xs-12"> 
				= <span ng-bind="myPlan.allGoalsBudget | currency" ng-style="{'font-size' : (myPlan.allGoalsBudget / 50) + 'px'}"></span>
			</div>
		</div>
	</div>	<!-- end mainController div-->
</div>		<!-- end calc div-->
	
<br><br><br><br>

<!-- TODO Paypal link, SAVE BUTTON -->

<footer id="myFooter" class="row, col-lg-12 col-md-12 col-sm-12 col-xs-12">
	<br><b>So WTF is this?</b>
	<br>I write versions of this calculator to learn a new language or platform, and this season AngularJS and Bootstrap are in. 
	<br>I've also written this in Python 
	<br>and <a href="clips/VisualiseIt_03.swf" target="_blank">Actionscript 3. Flash? Yes, Flash</a>.
	<br>I look forward to doing Java for Android and Swift for iOS next, 
	<br>or maybe trying Ruby On Rails again which proved challenging. Which is the point...Maybe perl/tk?!
	<br><a href="http://mariosphpworkshop.drupalgardens.com" target="_blank">I need a job</a>
	
</footer>

</body>
</html>